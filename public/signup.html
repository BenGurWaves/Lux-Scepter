<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <title>LUX SCEPTER â€¢ Sign Up</title>
  <style>
    body{background:#000;color:#D4AF37;font-family:system-ui;display:flex;align-items:center;justify-content:center;height:100vh;margin:0;}
    .box{background:#111;padding:40px;border-radius:12px;width:340px;border:1px solid #333;}
    input,button{width:100%;padding:14px;margin:10px 0;border:1px solid #444;background:#000;color:#D4AF37;border-radius:8px;font-size:16px;}
    button{background:#D4AF37;color:#000;cursor:pointer;}
    a{color:#D4AF37;}
  </style>
</head>
<body>
  <div class="box">
    <h1 style="text-align:center;margin-bottom:30px">SIGN UP</h1>
    <input type="text" id="username" placeholder="Username" required>
    <input type="email" id="email" placeholder="Email" required>
    <input type="password" id="password" placeholder="Password" required>
    <button onclick="signup()">Create & Enter Realm</button>
    <p style="text-align:center;margin-top:20px">
      Already rule? <a href="/signin.html">Sign In</a>
    </p>
  </div>

  <script>
    async function signup() {
      const res = await fetch('/api/signup', {
        method: 'POST',
        headers: {'Content-Type': 'application/json'},
        body: JSON.stringify({
          username: document.getElementById('username').value.trim(),
          email: document.getElementById('email').value.trim(),
          password: document.getElementById('password').value
        })
      });

      const data = await res.json();
      if (data.token && data.user) {
        localStorage.setItem('lux_token', data.token);
        localStorage.setItem('lux_user', JSON.stringify(data.user));
        location.href = '/home.html';
      } else {
        alert('Error: ' + (data.error || 'Try again'));
      }
    }
  </script>
</body>
</html>
